From: Zero King <l2dy@icloud.com>
Date: Sat, 26 May 2018 16:07:34 +0000
Subject: yaml: Test references

Cherry-picked from upstream commit 5a6e39aea1cbc7ac01101fd09dfe639c010cf04b
---
 t/32-yaml.t                  | 8 ++++----
 t/data-32/yamlkeysoption2.po | 6 +++---
 t/data-32/yamltest.po        | 6 +++---
 3 files changed, 10 insertions(+), 10 deletions(-)

diff --git a/t/32-yaml.t b/t/32-yaml.t
index 4b34caa..0f9287e 100644
--- a/t/32-yaml.t
+++ b/t/32-yaml.t
@@ -17,7 +17,7 @@ foreach my $YamlTest (@YamlTests) {
         'run' => "perl ../../po4a-normalize -f yaml ../data-32/$YamlTest.yaml >$YamlTest.err 2>&1".
 	         "&& mv po4a-normalize.po $YamlTest.po ".
 	         "&& mv po4a-normalize.output $YamlTest.out ",
-        'test'=> "perl ../compare-po.pl --no-ref ../data-32/$YamlTest.po $YamlTest.po ".
+        'test'=> "perl ../compare-po.pl ../data-32/$YamlTest.po $YamlTest.po ".
                  "&& diff -u ../data-32/$YamlTest.out $YamlTest.out 1>&2".
 	         "&& diff -u ../data-32/$YamlTest.err $YamlTest.err 1>&2",
         'doc' => "$YamlTest test"
@@ -28,7 +28,7 @@ push @tests, {
     'run' => "perl ../../po4a-normalize -f yaml ../data-32/yamlkeysoption1.yaml -o keys=name >yamlkeysoption1.err 2>&1".
 	     "&& mv po4a-normalize.po yamlkeysoption1.po ".
 	     "&& mv po4a-normalize.output yamlkeysoption1.out ",
-    'test'=> "perl ../compare-po.pl --no-ref ../data-32/yamlkeysoption1.po yamlkeysoption1.po ".
+    'test'=> "perl ../compare-po.pl ../data-32/yamlkeysoption1.po yamlkeysoption1.po ".
              "&& diff -u ../data-32/yamlkeysoption1.out yamlkeysoption1.out 1>&2".
 	     "&& diff -u ../data-32/yamlkeysoption1.err yamlkeysoption1.err 1>&2",
     'doc' => "yamlkeysoption1 test"
@@ -38,7 +38,7 @@ push @tests, {
     'run' => "perl ../../po4a-normalize -f yaml ../data-32/yamlkeysoption2.yaml -o 'keys=name file' >yamlkeysoption2.err 2>&1".
 	     "&& mv po4a-normalize.po yamlkeysoption2.po ".
 	     "&& mv po4a-normalize.output yamlkeysoption2.out ",
-    'test'=> "perl ../compare-po.pl --no-ref ../data-32/yamlkeysoption2.po yamlkeysoption2.po ".
+    'test'=> "perl ../compare-po.pl ../data-32/yamlkeysoption2.po yamlkeysoption2.po ".
              "&& diff -u ../data-32/yamlkeysoption2.out yamlkeysoption2.out 1>&2".
 	     "&& diff -u ../data-32/yamlkeysoption2.err yamlkeysoption2.err 1>&2",
     'doc' => "yamlkeysoption2 test"
@@ -48,7 +48,7 @@ push @tests, {
     'run' => "perl ../../po4a-normalize -f yaml ../data-32/yamlutf8.yaml -M UTF-8 >yamlutf8.err 2>&1".
 	     "&& mv po4a-normalize.po yamlutf8.po ".
 	     "&& mv po4a-normalize.output yamlutf8.out ",
-    'test'=> "perl ../compare-po.pl --no-ref ../data-32/yamlutf8.po yamlutf8.po ".
+    'test'=> "perl ../compare-po.pl ../data-32/yamlutf8.po yamlutf8.po ".
              "&& diff -u ../data-32/yamlutf8.out yamlutf8.out 1>&2".
 	     "&& diff -u ../data-32/yamlutf8.err yamlutf8.err 1>&2",
     'doc' => "yamlutf8 test"
diff --git a/t/data-32/yamlkeysoption2.po b/t/data-32/yamlkeysoption2.po
index 9f7a5b1..3cc67ca 100644
--- a/t/data-32/yamlkeysoption2.po
+++ b/t/data-32/yamlkeysoption2.po
@@ -34,13 +34,13 @@ msgid "Book Information"
 msgstr ""
 
 #. type: Hash Value - Key: Name
-#: >Topics> >Topics>
+#: >Topics>
 #, no-wrap
 msgid "Preface"
 msgstr ""
 
 #. type: Hash Value - Key: Name
-#: >Topics> >Topics>
+#: >Topics>
 #, no-wrap
 msgid "Introduction"
 msgstr ""
@@ -112,7 +112,7 @@ msgid "After the Installation"
 msgstr ""
 
 #. type: Hash Value - Key: Name
-#: >Topics>>Sub-Topics> >Topics>>Sub-Topics>
+#: >Topics>>Sub-Topics>
 #, no-wrap
 msgid "Troubleshooting"
 msgstr ""
diff --git a/t/data-32/yamltest.po b/t/data-32/yamltest.po
index 98eed9d..fa5c823 100644
--- a/t/data-32/yamltest.po
+++ b/t/data-32/yamltest.po
@@ -34,13 +34,13 @@ msgid "Book Information"
 msgstr ""
 
 #. type: Hash Value - Key: Name
-#: >Level1> >Level1>
+#: >Level1>
 #, no-wrap
 msgid "Preface"
 msgstr ""
 
 #. type: Hash Value - Key: Name
-#: >Level1> >Level1>
+#: >Level1>
 #, no-wrap
 msgid "Introduction"
 msgstr ""
@@ -112,7 +112,7 @@ msgid "After the Installation"
 msgstr ""
 
 #. type: Hash Value - Key: Name
-#: >Level1>>Level2-a> >Level1>>Level2-a>
+#: >Level1>>Level2-a>
 #, no-wrap
 msgid "Troubleshooting"
 msgstr ""
